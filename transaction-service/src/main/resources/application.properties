spring.application.name=transaction-service
spring.profiles.default=dev
server.port=8081
spring.cloud.compatibility-verifier.enabled=false

spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=false
spring.flyway.clean-disabled=true

spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5

management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.show-components=never
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.env=${spring.profiles.active:${spring.profiles.default}}

security.jwt.secret=${JWT_SECRET}
security.jwt.internal-secret=${INTERNAL_JWT_SECRET}
security.jwt.expiration-in-ms=3600000

account-service.base-url=${ACCOUNT_SERVICE_URL:http://localhost:8080}
account-service.timeout=${ACCOUNT_SERVICE_TIMEOUT:5000}
account-service.resilience.retry.max-attempts=${ACCOUNT_SERVICE_RETRY_MAX_ATTEMPTS:3}
account-service.resilience.retry.wait-duration=${ACCOUNT_SERVICE_RETRY_WAIT_DURATION:1000}
account-service.resilience.circuit-breaker.failure-rate-threshold=${ACCOUNT_SERVICE_CB_FAILURE_RATE:50}
account-service.resilience.circuit-breaker.wait-duration-in-open-state=${ACCOUNT_SERVICE_CB_WAIT_DURATION:30000}
account-service.resilience.circuit-breaker.sliding-window-size=${ACCOUNT_SERVICE_CB_SLIDING_WINDOW:10}
account-service.resilience.circuit-breaker.minimum-number-of-calls=${ACCOUNT_SERVICE_CB_MIN_CALLS:5}
account-service.resilience.time-limiter.timeout=${ACCOUNT_SERVICE_TIMEOUT:5000}

transaction.processing.timeout=30000
transaction.retry.max-attempts=3
transaction.retry.delay=1000

logging.level.com.suhasan.finance.transaction_service=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=INFO
