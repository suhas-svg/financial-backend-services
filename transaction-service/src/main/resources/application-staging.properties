# ================================================
# Staging Environment Configuration
# ================================================

# ------------------------------------------------
# Database Configuration for Staging
# ------------------------------------------------
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://staging-db:5432/transactiondb_staging}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:transaction_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:staging_password}

# ------------------------------------------------
# Flyway Configuration for Staging
# ------------------------------------------------
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=true
spring.flyway.out-of-order=false

# Flyway Maven plugin properties for staging
flyway.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://staging-db:5432/transactiondb_staging}
flyway.user=${SPRING_DATASOURCE_USERNAME:transaction_user}
flyway.password=${SPRING_DATASOURCE_PASSWORD:staging_password}

# ------------------------------------------------
# JPA Configuration for Staging
# ------------------------------------------------
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ------------------------------------------------
# Staging-specific Settings
# ------------------------------------------------
logging.level.com.suhasan.finance.transaction_service=INFO
logging.level.org.flywaydb=INFO
logging.level.root=INFO

# Staging cache settings
spring.data.redis.host=${REDIS_HOST:staging-redis}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:staging_redis_password}
spring.data.redis.timeout=3000ms

# Staging monitoring
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized

# Connection pool settings for staging
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000